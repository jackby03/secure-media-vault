spring:
  application:
    name: secure-media-vault
  main:
    web-application-type: reactive
  r2dbc:
    url: r2dbc:postgresql://localhost:5432/management
    username: postgres
    password: postgres
  flyway:
    enabled: true
    url: jdbc:postgresql://localhost:5432/management
    user: postgres
    password: postgres
    locations: classpath:db/migration
    baseline-on-migrate: true
  data:
    redis:
      host: redis
      port: 6379
  rabbitmq:
    host: rabbitmq
    port: 5672
    username: guest
    password: guest

app:
  cache:
    file-metadata:
      ttl: PT30M  # 30 minutos
      max-size: 1000
      enabled: true
    search-results:
      ttl: PT15M  # 15 minutos
      max-size: 500
      enabled: true
    thumbnails:
      ttl: PT2H   # 2 horas
      max-size: 2000
      enabled: true
    user-files:
      ttl: PT10M  # 10 minutos
      max-size: 100
      enabled: true
  rabbitmq:
    host: rabbitmq
    port: 5672
    username: guest
    password: guest
    virtual-host: /
    exchanges:
      file-events: file.events
      file-events-dlx: file.events.dlx
    queues:
      file-processing: file.processing
      file-processing-dlq: file.processing.dlq
    routing:
      file-uploaded: file.uploaded
      file-processing-started: file.processing.started
      file-processing-completed: file.processing.completed
      file-processing-failed: file.processing.failed

server:
  port: 8080

minio:
  url: http://minio:9000
  access-key: minioadmin
  secret-key: minioadmin
  bucket-name: secure-media-vault
  connect-timeout: 10000
  write-timeout: 60000
  read-timeout: 10000

logging:
  level:
    org:
      springframework:
        r2dbc:
          core: debug
        data:
          r2dbc: debug
jwt:
  key: "tu-clave-secreta-aqui-debe-ser-muy-larga-para-ser-segura"
  access-token-expiration: 3600000  # 1 hora
  refresh-token-expiration: 86400000  # 24 horas